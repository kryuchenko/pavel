# PAVEL Deployment Guide

## üöÄ One-Click Deployment

PAVEL –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—É–ø–µ—Ä –ø—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ 1 –∫–ª–∏–∫ —Å –ø–æ–º–æ—â—å—é Docker.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker Desktop –∏–ª–∏ Docker Engine + Docker Compose
- 4GB+ RAM (–¥–ª—è embedding –º–æ–¥–µ–ª–∏)
- 2GB+ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd pavel

# –ó–∞–ø—É—Å—Ç–∏ –æ–¥–Ω–∏–º —Å–∫—Ä–∏–ø—Ç–æ–º!
./deploy.sh
```

–í—Å—ë! –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ.

## üìä –ß—Ç–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è

```mermaid
graph TD
    A[deploy.sh] --> B[MongoDB 8.0]
    A --> C[PAVEL App]
    B --> D[Database: gp]
    C --> E[Vector Search]
    C --> F[Review Collection]
    C --> G[Web API :8080]
```

### –°–µ—Ä–≤–∏—Å—ã
- **MongoDB 8.0**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ –∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
- **PAVEL App**: –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º
- **Networking**: –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è Docker —Å–µ—Ç—å
- **Volumes**: –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
./deploy.sh

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./deploy.sh stop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
./deploy.sh restart

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å
./deploy.sh status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
./deploy.sh logs
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
```bash
# –ü–æ–∏—Å–∫ –ø–æ –æ—Ç–∑—ã–≤–∞–º
docker exec pavel-app python search_reviews.py "excellent game" --limit 5

# –°–±–æ—Ä –Ω–æ–≤—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
docker exec pavel-app python collect_reviews.py --app-id com.example.app

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
docker exec pavel-app python search_reviews.py --stats

# –ü–æ–∏—Å–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º
docker exec pavel-app python search_reviews.py --issues --limit 10

# –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
docker exec pavel-app python search_reviews.py --sentiment negative --limit 5
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```env
# Database
MONGO_PASSWORD=pavel123

# Application
PAVEL_DEFAULT_APP_ID=com.nianticlabs.pokemongo
PAVEL_LOG_LEVEL=INFO
PAVEL_EMBEDDING_MODEL=intfloat/multilingual-e5-large

# Features
PAVEL_ENABLE_DEDUPLICATION=true
PAVEL_ENABLE_COMPLAINT_FILTER=true
PAVEL_ENABLE_AUTO_CLUSTERING=true
```

### –ü–æ—Ä—Ç—ã
- `27017`: MongoDB
- `8080`: PAVEL API (–±—É–¥—É—â–µ–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```
pavel/
‚îú‚îÄ‚îÄ logs/           # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ models/         # –ö—ç—à ML –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ data/           # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ secrets/        # –ö–ª—é—á–∏ API
‚îî‚îÄ‚îÄ volumes/
    ‚îî‚îÄ‚îÄ mongodb/    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MongoDB
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
```bash
# Bash –≤ PAVEL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
docker exec -it pavel-app bash

# Bash –≤ MongoDB
docker exec -it pavel-mongodb mongosh
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
docker-compose up -d
docker exec pavel-app python your_script.py

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å
docker exec pavel-app pip install new-package
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./deploy.sh status

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
./deploy.sh logs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ MongoDB
docker exec pavel-mongodb mongosh --eval "db.adminCommand('ping')"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ PAVEL
docker exec pavel-app python -c "from src.pavel.core.config import get_config; print('‚úÖ PAVEL OK')"
```

### –ú–µ—Ç—Ä–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: `docker stats`
- –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: `docker exec pavel-mongodb du -sh /data/db`
- –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `./logs/pavel.log`

## üö® Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**Docker daemon –Ω–µ –∑–∞–ø—É—â–µ–Ω**
```bash
# macOS/Windows
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker Desktop

# Linux
sudo systemctl start docker
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
docker stats

# –£–≤–µ–ª–∏—á–∏—Ç—å memory limit –≤ Docker Desktop
# Settings ‚Üí Resources ‚Üí Memory ‚Üí 6GB+
```

**MongoDB –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs pavel-mongodb

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose down -v
./deploy.sh
```

**PAVEL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs pavel-app

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart pavel
```

## üåç Production Deployment

–î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

### Docker Swarm
```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è swarm
docker swarm init

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–∞–∫ stack
docker stack deploy -c docker-compose.yml pavel
```

### Kubernetes (–±—É–¥—É—â–µ–µ)
- –°–æ–∑–¥–∞—Ç—å Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Helm charts
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å Prometheus

### Cloud Platforms
- **AWS**: ECS + RDS
- **GCP**: Cloud Run + Cloud SQL
- **Azure**: Container Instances + Cosmos DB

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ PAVEL –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- Load balancer (nginx/traefik)
- Shared MongoDB –∫–ª–∞—Å—Ç–µ—Ä

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ  
- –£–≤–µ–ª–∏—á–∏—Ç—å CPU/RAM –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- SSD –¥–ª—è MongoDB
- GPU –¥–ª—è embedding –º–æ–¥–µ–ª–µ–π

---

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

```bash
# üöÄ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë
./deploy.sh

# üîç –ù–∞–π—Ç–∏ –±–∞–≥–∏
docker exec pavel-app python search_reviews.py --issues

# üìä –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
docker exec pavel-app python search_reviews.py --stats

# üõë –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë
./deploy.sh stop
```

**–ì–æ—Ç–æ–≤–æ! PAVEL —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ**